[global-meta]
agent = Bitbucket
destination = https://yourwebhookdestinationurl.com
template = discord
key-from-header = X-Event-Key

[default]
webhook-username = Bitbucket
username = $data.actor.username
url = $data.repository.links.html.href
title = [$data.repository.full_name] Unhandled webhook event
description = This webhook event is unhandled by the current configuration for Webhook Hub, thanks $data.actor.display_name!
avatar-url = https://azuqua.com/wp-content/uploads/2017/06/AppLogo_Bitbucket.png
color-code = $config.color-gray
author-url = $data.actor.links.html.href
author-avatar-url = $data.actor.links.avatar.href

color-red = 16525609
color-orange = 15426592
color-yellow = 16775504
color-green = 38912
color-blue = 7583971
color-gray = 5198940

[issue:created]
url = $data.issue.links.html.href
title = [$data.repository.full_name] Issue opened: #$data.issue.id $data.issue.title
description = $data.issue.content.raw
color-code = $config.color-orange

[repo:push]
url = ${if data.push.changes.0.closed}$data.push.changes.0.old.links.html.href${else}$data.push.changes.0.new.links.html.href${endif}
title = [$data.repository.full_name] Branch ${if data.push.changes.0.closed}${data.push.changes.0.old.name} was deleted${else}${data.push.changes.0.new.name} was ${if data.push.changes.0.forced}force-${endif}pushed to repo${endif}
description = ${if data.push.changes.0.closed}Thanks,${else}${if data.push.changes.0.forced}Easy there,${else}${if data.push.changes.0.created}Nice new branch,${else}$data.push.changes.0.commits.length new commit(s). Nice work,${endif}${endif}${endif} $data.actor.username!
color-code = ${if data.push.changes.0.closed}$config.color-red${else}${if data.push.changes.0.forced}$config.color-yellow${else}$config.color-blue${endif}${endif}
field-name = ${if not data.push.changes.0.closed}Head Commit${endif}
field-value = ${if not data.push.changes.0.closed}${data.push.changes.0.commits.0.message}${endif}

[pullrequest]
url = $data.pullrequest.links.html.href
description = $data.pullrequest.description

[pullrequest:created]
parent = pullrequest
title = [$data.repository.full_name] Pull request opened: #$data.pullrequest.id $data.pullrequest.title
color-code = $config.color-blue

[pullrequest:approved]
parent = pullrequest
title = [$data.repository.full_name] Pull request approved: #$data.pullrequest.id $data.pullrequest.title
description = $data.actor.display_name has approved this PR
color-code = $config.color-green

[pullrequest:unapproved]
parent = pullrequest
title = [$data.repository.full_name] Pull request approval removed: #$data.pullrequest.id $data.pullrequest.title
description = $data.actor.display_name has removed their approval of this PR
color-code = $config.color-red

[pullrequest:fulfilled]
parent = pullrequest
title = [$data.repository.full_name] Pull request merged: #$data.pullrequest.id $data.pullrequest.title
description = $data.actor.display_name has fulfilled this PR
color-code = $config.color-green

[pullrequest:rejected]
parent = pullrequest
title = [$data.repository.full_name] Pull request declined: #$data.pullrequest.id $data.pullrequest.title
description = $data.actor.display_name has rejected this PR: $data.pullrequest.reason
color-code = $config.color-red